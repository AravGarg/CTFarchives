#!/usr/bin/env perl
use strict;
$| = 1;
my $logo = <<"EOF";
.......:::..:::::..::........::::::..::::::::........::::::..:::::..:::::::::..:::::..:::......::::......:::
########:::::'###::::'########::'##:::'##::::'########::'##:::'##:'########:::::'###:::::'######:::'######::
##.... ##:::'## ##::: ##.... ##:. ##:'##::::: ##.... ##:. ##:'##:: ##.... ##:::'## ##:::'##... ##:'##... ##:
##:::: ##::'##:. ##:: ##:::: ##::. ####:::::: ##:::: ##::. ####::: ##:::: ##::'##:. ##:: ##:::..:: ##:::..::
########::'##:::. ##: ########::::. ##::::::: ########::::. ##:::: ########::'##:::. ##:. ######::. ######::
##.... ##: #########: ##.... ##:::: ##::::::: ##.... ##:::: ##:::: ##.....::: #########::..... ##::..... ##:
##:::: ##: ##.... ##: ##:::: ##:::: ##::::::: ##:::: ##:::: ##:::: ##:::::::: ##.... ##:'##::: ##:'##::: ##:
########:: ##:::: ##: ########::::: ##::::::: ########::::: ##:::: ##:::::::: ##:::: ##:. ######::. ######::
.......:::..:::::..::........::::::..::::::::........::::::..:::::..:::::::::..:::::..:::......::::......:::
Welcome to 0CTF/TCTF 2020! 
Paste your PHP code here, end it with EOF (not Ctrl-D :P). Then I will run `php <xxx.php>`.
EOF

print $logo;
my $filename = `mktemp`;
alarm(30);
chomp $filename;
open(my $f, '>', $filename) || die 'Fatal error, ping admin plz ._.';
while (my $line = <>) {
    last if $line eq "EOF\n";
    print $f $line;
}
close($f);

print "Ready? Go!\n";
exec 'timeout', '-k1', 30, 'php', $filename;
